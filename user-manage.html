<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <title>Interactive Web Form Assignment</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
  </head>

  <body class="bg-light">
    <div class="container mt-5">
      <div class="row">
        <h3>User List</h3>
        <div class="d-inline mb-3">
          <button
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#add-user-modal"
          >
            Add User
          </button>
        </div>
      </div>
      <div class="row">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Username</th>
              <th scope="col">Full Name</th>
              <th scope="col">Email</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
            <tr>
              <td>Jacob</td>
              <td>Thornton</td>
              <td>@fat</td>
            </tr>
            <tr>
              <td colspan="2">Larry the Bird</td>
              <td>@twitter</td>
              <td>@twitter</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="add-user-modal" class="modal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">New User</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="username mb-3">
                  <label class="form-label" for="username">Username</label>
                  <input class="form-control" type="text" id="username" />
                </div>
              </div>
              <div class="row">
                <div class="fullname mb-3">
                  <label class="form-label" for="fullname">Full Name</label>
                  <input class="form-control" type="text" id="fullname" />
                </div>
              </div>
              <div class="row">
                <div class="email mb-3">
                  <label class="form-label" for="email">Email</label>
                  <input class="form-control" type="email" id="email" />
                </div>
              </div>
              <div class="row">
                <span class="required-text text-danger d-none"
                  >Please fill all fields</span
                >
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="submitBtn btn btn-success">
                Add User
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
      $(document).ready(function () {
        const userList = [];
        loadUserList();

        function loadUserList() {
          const tbody = $('.table tbody');
          tbody.empty();
          userList.map((user) => {
            tbody.append(
              $(`
                <tr>
                <td>${user.username}</td>
                <td>${user.fullname}</td>
                <td>${user.email}</td>
                </tr>
            `)
            );
          });
        }

        $('.submitBtn').on('click', function () {
          const username = $('#username');
          const fullname = $('#fullname');
          const email = $('#email');

          if (
            username.val().length &&
            fullname.val().length &&
            email.val().length
          ) {
            $('.required-text').addClass('d-none');
            // all values are present
            userList.push({
              username: username.val(),
              fullname: fullname.val(),
              email: email.val(),
            });
            // set values empty
            username.val('');
            fullname.val('');
            email.val('');
            loadUserList();
            $('#add-user-modal').modal('hide');
          } else {
            $('.required-text').removeClass('d-none');
          }
        });
      });
    </script>
  </body>
</html>
